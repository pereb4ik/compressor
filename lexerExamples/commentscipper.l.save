%{
#include <stdio.h>
%}

%x comment1
%x comment2
%x lop

%%

"/*"				BEGIN(comment1);
"//"				BEGIN(comment2);

<comment1>[^*]			;
<comment1>"*"+[^/]		;
<comment1>"*/"			BEGIN(INITIAL);

<comment2>[^\n\\]		;
<comment2>[\\]			BEGIN(lop);
<comment2>[\n]			BEGIN(INITIAL);

<lop>[ \t\n\\]			;
<lop>[^ \t\n\\]			BEGIN(comment2);

["][^"]*["]			{ ECHO; }

['][^']*[']			{ ECHO; }

[ \t]+				{ putchar(' '); } //skip many space/newlines to one

[\n]+				{ putchar('\n'); }

.				{ ECHO; }

%%

main() {
	yylex();	
}
